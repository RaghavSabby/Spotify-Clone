import"./style.c0ed6924.js";import{A as s,E as r,T as d}from"./common.15b301e7.js";const l="b9704199a35649f88c10815676b0c368",w={VITE_CLIENT_ID:"b9704199a35649f88c10815676b0c368",VITE_API_BASE_URL:"https://api.spotify.com/v1",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}.VITE_REDIRECT_URI,E="user-top-read user-follow-read user-library-read playlist-read-private",c={VITE_CLIENT_ID:"b9704199a35649f88c10815676b0c368",VITE_API_BASE_URL:"https://api.spotify.com/v1",BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}.VITE_APP_URL,I=()=>{const o=`https://accounts.spotify.com/authorize?client_id=${l}&response_type=token&scope=${E}&redirect_uri=${w}&show_dialog=true`;window.open(o,"login","width:800 height:600")};document.addEventListener("DOMContentLoaded",()=>{document.getElementById("login-to-spotify").addEventListener("click",I)});window.setItemsInLocalStorage=({accessToken:o,expiresIn:t,tokenType:e})=>{localStorage.setItem(s,o),localStorage.setItem(r,Date.now()+t*1e3),localStorage.setItem(d,e),window.location.href=c};window.addEventListener("load",()=>{if(localStorage.getItem(s)&&(window.location.href=`${c}/dashboard/dashboard.html`),window.opener!==null&&!window.opener.closed){window.focus(),window.location.href.includes("error")&&window.close();const{hash:t}=window.location;console.log(t);const e=new URLSearchParams(t),n=e.get("#access_token"),a=e.get("expires_in"),i=e.get("token_type");n?(window.close(),window.opener.setItemsInLocalStorage({accessToken:n,expiresIn:a,tokenType:i})):window.close()}});
